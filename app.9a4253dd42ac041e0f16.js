!function(){"use strict";function e(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class t{constructor(n,i,r,o,c,s){let d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"https://images.pexels.com/photos/2036544/pexels-photo-2036544.jpeg?cs=srgb&dl=pexels-prime-cinematics-2036544.jpg&fm=jpg&w=640&h=360";e(this,"id",void 0),e(this,"brand",void 0),e(this,"model",void 0),e(this,"year",void 0),e(this,"enginePower",void 0),e(this,"mileage",void 0),e(this,"price",void 0),e(this,"img",void 0),this.id=t.indexInc++,this.brand=n,this.model=i,this.year=r,this.enginePower=o,this.mileage=c,this.price=s,this.img=d}get nameStr(){return`${this.brand} ${this.model}`}get mileageStr(){return`${this.mileage} km`}get enginePowerStr(){return`${this.enginePower} KM`}get priceStr(){return`${this.price} zł`}}e(t,"indexInc",1);class n{constructor(t,i){e(this,"id",void 0),e(this,"name",void 0),e(this,"price",void 0),this.id=n.indexInc++,this.name=t,this.price=i}get priceStr(){return`${this.price} zł`}get nameStr(){return`${this.name} - ${this.priceStr}`}}e(n,"indexInc",1);const i=[new t("Skoda","Citigo",2018,11,2e4,1e4),new t("Skoda","Fabia",2018,22,4e4,2e4),new t("Skoda","Octavia",2020,33,6e4,3e4),new t("Toyota","Aygo",2014,44,2e4,4e4),new t("Toyota","Yaris",2015,55,4e4,5e4),new t("Toyota","Rav 4",2016,66,6e4,6e4)],r=["Wszystkie",...new Set(i.map((e=>e.brand)))],o=[new n("Opony zimowe",2e3),new n("Pakiet przeglądów",3e3),new n("Dodatkowy rok gwarancji",5e3)];function c(e){return e=Number(e),i.find((t=>t.id===e))}function s(e){return e=e.map((e=>Number(e))),o.filter((t=>e.includes(t.id)))}const d=document.querySelector("#summary-view"),a=new Event("show-summary-view");const m=document.querySelector("#form-view"),l=new Event("show-form-view");const u=document.querySelector("#list-view"),p=new Event("show-list-view");u.addEventListener(p.type,(function(){const e=document.querySelector("#brand-filter"),t=document.querySelector("#car-list");function n(e){const n=e.target.selectedIndex;!function(e){t.replaceChildren(),e.forEach((e=>{const n=document.createElement("li");n.dataset.carId=e.id,n.innerHTML=`\n          <img src="${e.img}" alt="Zdjęcie ${e.nameStr}." />\n          <h2>${e.nameStr}</h2>\n          <dl>\n            <dt>Rocznik:</dt>\n            <dd>${e.year}</dd>\n            <dt>Moc:</dt>\n            <dd>${e.enginePowerStr}</dd>\n            <dt>Przebieg:</dt>\n            <dd>${e.mileageStr}</dd>\n            <dt>Cena:</dt>\n            <dd>${e.priceStr}</dd>\n          </dl>\n        `,t.appendChild(n)}))}(function(e){if(0===(e=Number(e)))return i;const t=r[e];return i.filter((e=>e.brand===t))}(n)),sessionStorage.setItem("selected-brand-option",n)}e.replaceChildren(),r.forEach((t=>e.add(new Option(t,t)))),e.options[0].defaultSelected=!0,e.addEventListener("change",n),t.addEventListener("click",(function i(r){const o=r.target.closest("li");o&&(u.classList.add("hidden"),e.removeEventListener("change",n),t.removeEventListener("click",i),sessionStorage.setItem("selected-car",o.dataset.carId),m.dispatchEvent(l))})),Boolean(sessionStorage.getItem("selected-brand-option"))&&function(){const t=sessionStorage.getItem("selected-brand-option");e.selectedIndex=t}(),e.dispatchEvent(new Event("change")),u.classList.remove("hidden")})),m.addEventListener(l.type,(function(){const e=document.querySelector("#quit-form-view"),t=document.querySelector("#form"),n=document.querySelector("#accessories"),i=document.querySelector("#payment"),r=document.querySelector("#car-info"),s=document.querySelector("#full-name"),l=document.querySelector("#pick-up-place"),v=document.querySelector("#pick-up-date");function h(){const e=[...document.querySelectorAll('input[name="accessories"]')].filter((e=>e.checked)),t=[r,...e].map((e=>Number(e.dataset.price))).reduce(((e,t)=>e+t));document.querySelector("#total-price").innerText=`${t} zł`}function g(){m.classList.add("hidden"),E(),t.reset(),sessionStorage.removeItem("selected-car"),sessionStorage.removeItem("form-data"),u.dispatchEvent(p)}function S(e){"INPUT"===e.target.nodeName&&w()}function f(e){"INPUT"===e.target.nodeName&&(h(),w())}function y(e){e.preventDefault(),m.classList.add("hidden"),E(),d.dispatchEvent(a)}function E(){e.removeEventListener("click",g),s.removeEventListener("keyup",w),l.removeEventListener("keyup",w),v.removeEventListener("change",w),i.removeEventListener("change",S),n.removeEventListener("change",f),t.removeEventListener("click",y)}function w(){console.log("save");const e=new FormData(t),n=Object.fromEntries(e.entries());n.accessories=e.getAll("accessories"),sessionStorage.setItem("form-data",JSON.stringify(n))}n.replaceChildren(),o.forEach((e=>{const t=document.createElement("label");t.innerHTML=`\n          <input type="checkbox" name="accessories" value="${e.id}" data-price="${e.price}" />\n          <span>${e.nameStr}</span>\n        `,n.appendChild(t)})),function(){const e=new Date;e.setDate(e.getDate()+1),v.setAttribute("min",e.toISOString().split("T")[0]),e.setDate(e.getDate()+14),v.setAttribute("max",e.toISOString().split("T")[0])}(),e.addEventListener("click",g),s.addEventListener("keyup",w),l.addEventListener("keyup",w),v.addEventListener("change",w),i.addEventListener("change",S),n.addEventListener("change",f),t.addEventListener("submit",y),function(){const e=c(sessionStorage.getItem("selected-car"));r.innerText=`${e.nameStr} - ${e.priceStr}`,r.dataset.price=e.price,document.querySelector("#car-id").value=e.id}(),Boolean(sessionStorage.getItem("form-data"))&&function(){const e=JSON.parse(sessionStorage.getItem("form-data")),{payment:t,accessories:n,...i}=e;t&&(document.querySelector(`#payment input[value="${t}"]`).checked=!0),n&&n.forEach((e=>{document.querySelector(`#accessories input[value="${e}"]`).checked=!0})),Object.entries(i).forEach((e=>{console.log(e),document.querySelector(`#${e[0]}`).value=e[1]}))}(),h(),m.classList.remove("hidden")})),d.addEventListener(a.type,(function(){const e=document.querySelector("#quit-summary-view"),t=document.querySelector("#order");e.addEventListener("click",(function t(){d.classList.add("hidden"),e.removeEventListener("click",t),u.dispatchEvent(p)})),function(){t.replaceChildren();const e=JSON.parse(sessionStorage.getItem("form-data")),n=c(e["car-id"]),i=document.createElement("img");i.setAttribute("src",n.img),i.setAttribute("alt",`Zdjęcie ${n.nameStr}`),t.appendChild(i);const r=document.createElement("dl");r.innerHTML=`\n        <dt>Imię i nazwisko: </dt>\n        <dd>${e["full-name"]}</dd>\n        <dt>Miejsce odbioru: </dt>\n        <dd>${e["pick-up-place"]}</dd>\n        <dt>Data odbioru: </dt>\n        <dd>${e["pick-up-date"]}</dd>\n        <dt>Forma finansowania: </dt>\n        <dd>${"lease"===e.payment?"Leasing":"Gotówka"}</dd>\n        <dt>Auto: </dt>\n        <dd>${n.nameStr} - ${n.priceStr}</dd>\n      `;let o=[];if(0!==e.accessories.length){const t=document.createElement("dt");t.innerText="Akcesoria: ",r.appendChild(t),o=s(e.accessories),o.forEach((e=>{const t=document.createElement("dd");t.innerText=e.nameStr,r.appendChild(t)}))}const d=document.createElement("dt");d.innerText="Razem: ",r.appendChild(d);const a=document.createElement("dd");a.innerText=[n,...o].map((e=>e.price)).reduce(((e,t)=>e+t)),a.innerText+=" zł",r.appendChild(a),t.appendChild(r)}(),setTimeout((function(){console.log("remove session"),sessionStorage.removeItem("selected-car"),sessionStorage.removeItem("form-data")}),300),d.classList.remove("hidden")})),sessionStorage.getItem("selected-car")?m.dispatchEvent(l):u.dispatchEvent(p)}();
//# sourceMappingURL=app.9a4253dd42ac041e0f16.js.map